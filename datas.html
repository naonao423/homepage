H<!doctype html>
<html lang="ja">
  <head>
    <h5><br></h5>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.13.0/moment.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.15.0/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
    <script src="utils.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>

    <nav class="navbar navbar-expand-md navbar-light bg-dark fixed-top">
    <a class="navbar-brand text-white" href="#">Homename</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item active">
          <a class="nav-link" href="homepage.html">Home<span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="programing.html">Programming</a>
        <li class="nav-item">
          <a class="nav-link" href="Urls.html">Urls</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="datas.html">Data</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="setting.html">Setting</a>
        </li>
      </ul>
    </div>
    </nav>
    <title id="top">Hello, world!</title>
  </head>
  <body>
    <div class="container-fluid">
      <div class="row">
        <nav id="sidebarmenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
          <div class="sidebar-sticky px-2">
            <ul class="nav flex-column px-2">
              <li>
                <a href="#top" class="nav-link active">
                  <img src="img/icons/svg/home.svg" alt="" height=20>
                  Top
                </a>
              </li>
              <li>
                <a href="" class="nav-link active">
                  <img src="img/icons/svg/laptop.svg" alt="" height=20>
                  Data
                </a>
              </li>
              <li>
                <a href="#" class="nav-link active">
                  <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-home"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                  test
                </a>
              </li>
              <li>
                <input type="date" id="input_data_start" value="2020-08-20">
                <br>
                <input type="date" id="input_data_stop" value="2020-09-06">
                <br>
              </li>
            </ul>
          </div>
        </nav>
      </div>
    </div>
  <main role="main" role="main" class="col-md-9 ml-sm-auto col-lg-10 px-md-4 mt-5">
    <div class="container" id="top">
      <div class="row">
        <div  class="col-lg-6 col-12" id="graphall">
          <div >
            <canvas id="canvas1"></canvas>
          </div>
        </div>
        <div  class="col-lg-6 col-12" id="graphall">
          <div >
            <canvas id="canvas2"></canvas>
          </div>
        </div>
        <div  class="col-lg-6 col-12" id="graphall">
          <div >
            <canvas id="canvas3"></canvas>
          </div>
        </div>
        <div  class="col-lg-6 col-12" id="graphall">
          <div >
            <canvas id="canvas4"></canvas>
          </div>
        </div>
        <div  class="col-lg-6 col-12" id="graphall">
          <div >
            <canvas id="canvas5"></canvas>
          </div>
        </div>
        <div  class="col-lg-6 col-12" id="graphall">
          <div >
            <canvas id="canvas6"></canvas>
          </div>
        </div>
        <div  class="col-lg-6 col-12" id="graphall">
          <div >
            <canvas id="canvas7"></canvas>
          </div>
        </div>
        <div  class="col-lg-6 col-12" id="graphall">
          <div >
            <canvas id="canvas8"></canvas>
          </div>
        </div>

      </div>
    </div>
  </main>


  <script>


    document.getElementById('input_data_start').addEventListener('change',
    function(){
    var start =document.querySelector('#input_data_start')
    var start_date = start.value
    var stop =document.querySelector('#input_data_stop')
    var stop_date = stop.value
    var urls = "http://127.0.0.1:8000/events/datescale/" + start_date + "/" +stop_date
    var dic = ""
    var data_value = []
    var date_list =[]
    var data_list =[]
    var data_list_all =[]
    $.ajax({
      'url':urls,
      'type':"GET",
    }).done(function(data){
      datetime1 = Object.keys(data)
      datetime1.forEach((item, i) => {
      date_part =  moment(item)
      date_list.push(date_part)
      config1.data.labels = date_list
      config2.data.labels = date_list
      config3.data.labels = date_list
      config4.data.labels = date_list
      config5.data.labels = date_list
      config6.data.labels = date_list
      config7.data.labels = date_list
      config8.data.labels = date_list
      if (i == 1){
        one_file = Object.keys(data[item])
        config_len = one_file.length
        }
      });
      one_file.forEach((sub,i) =>{
        // console.log(sub)
      datetime1.forEach((item, i) => {
      subdata = data[item]
      subdata = subdata[sub].minute

      data_list.push(subdata)
      // console.log(data_list)
              })
              data_list_all.push(data_list)
              data_list = []
      });
      console.log(data_list_all)
      config1.data.datasets[0].label = one_file[0]
      config1.data.datasets[0].data= data_list_all[0]
      config2.data.datasets[0].label = one_file[1]
      config2.data.datasets[0].data= data_list_all[1]
      config3.data.datasets[0].label = one_file[2]
      config3.data.datasets[0].data= data_list_all[2]
      config4.data.datasets[0].label = one_file[3]
      config4.data.datasets[0].data= data_list_all[3]
      config5.data.datasets[0].label = one_file[4]
      config5.data.datasets[0].data= data_list_all[4]
      config6.data.datasets[0].label = one_file[5]
      config6.data.datasets[0].data= data_list_all[5]
      config7.data.datasets[0].label = one_file[6]
      config7.data.datasets[0].data= data_list_all[6]
      config8.data.datasets[0].label = one_file[7]
      config8.data.datasets[0].data= data_list_all[7]
      // document.getElementById("summary").innerHTML = data_list_all[1]
      window.myLine1.update();
      window.myLine2.update();
      window.myLine3.update();
      window.myLine4.update();
      window.myLine5.update();
      window.myLine6.update();
      window.myLine7.update();
      window.myLine8.update();
    }
    ).fail(
      // document.getElementById("summary").innerHTML = "ロード中"
    )})

    var timeFormat = 'MM/DD/YYYY';
    var start_date = "2020-09-01"
    var stop_date = "2020-09-09"
    var date_list =[]
    var data_list =[]
    var data_list_all =[]
    var urls = "https://yd84omt2rd.execute-api.ap-northeast-1.amazonaws.com/api/events/datescale/" + start_date + "/" +stop_date
      $.ajax({
        'url':urls,
        'type':"GET",
      }).done(function(data){
        datetime1 = Object.keys(data)
        datetime1.forEach((item, i) => {
        date_part =  moment(item)
        date_list.push(date_part)
        config1.data.labels = date_list
        config2.data.labels = date_list
        config3.data.labels = date_list
        config4.data.labels = date_list
        config5.data.labels = date_list
        config6.data.labels = date_list
        config7.data.labels = date_list
        config8.data.labels = date_list
        if (i == 1){
          one_file = Object.keys(data[item])
          config_len = one_file.length
          }
        });
        one_file.forEach((sub,i) =>{
          // console.log(sub)
        datetime1.forEach((item, i) => {
        subdata = data[item]
        subdata = subdata[sub].minute

        data_list.push(subdata)
        // console.log(data_list)
                })
                data_list_all.push(data_list)
                data_list = []
        });
        config1.data.datasets[0].label = one_file[0]
        config1.data.datasets[0].data= data_list_all[0]
        config2.data.datasets[0].label = one_file[1]
        config2.data.datasets[0].data= data_list_all[1]
        config3.data.datasets[0].label = one_file[2]
        config3.data.datasets[0].data= data_list_all[2]
        config4.data.datasets[0].label = one_file[3]
        config4.data.datasets[0].data= data_list_all[3]
        config5.data.datasets[0].label = one_file[4]
        config5.data.datasets[0].data= data_list_all[4]
        config6.data.datasets[0].label = one_file[5]
        config6.data.datasets[0].data= data_list_all[5]
        config7.data.datasets[0].label = one_file[6]
        config7.data.datasets[0].data= data_list_all[6]
        config8.data.datasets[0].label = one_file[7]
        config8.data.datasets[0].data= data_list_all[7]
        // document.getElementById("summary").innerHTML = data_list_all[1]
        window.myLine1.update();
        window.myLine2.update();
        window.myLine3.update();
        window.myLine4.update();
        window.myLine5.update();
        window.myLine6.update();
        window.myLine7.update();
        window.myLine8.update();
      }
      ).fail(
        // document.getElementById("summary").innerHTML = "ロード中"
      )


  		var color = Chart.helpers.color;
var config1 = {
      type: 'line',
      data: {
        labels:date_list,
        datasets: [{
          label: "test",
          backgroundColor: color(window.chartColors.red).alpha(0.5).rgbString(),
          borderColor: window.chartColors.red,
          fill: true,
          data: [],
        }]
      },
      options: {
  aspectRatio : 3,        title: {
          text: 'Chart.js Time Scale'
        },
        scales: {
          xAxes: [{
            type: 'time',
            time: {
              parser: timeFormat,
              // round: 'day'
              tooltipFormat: 'll HH:mm',
              unit:"day"
            },
            scaleLabel: {
              display: true,
              labelString: 'Date'
            }
          }],
          yAxes: [{
            scaleLabel: {
              display: true,
              labelString: 'minute'
            },
            ticks:{
              min: 0
            }
          }]
        },
    }
};
var config2 = {
    type: 'line',
    data: {
      labels:date_list,
      datasets: [{
        label: "test",
        backgroundColor: color(window.chartColors.orange).alpha(0.5).rgbString(),
        borderColor: window.chartColors.orange,
        fill: true,
        data: [],
      }]
    },
    options: {
  aspectRatio : 3,      title: {
        text: 'Chart.js Time Scale'
      },
      scales: {
        xAxes: [{
          type: 'time',
          time: {
            parser: timeFormat,
            // round: 'day'
            tooltipFormat: 'll HH:mm',
            unit:"day"
          },
          scaleLabel: {
            display: true,
            labelString: 'Date'
          }
        }],
        yAxes: [{
          scaleLabel: {
            display: true,
            labelString: 'minute'
          },
          ticks:{
            min: 0
          }
        }]
      },
  }
};
var config3 = {
  type: 'line',
  data: {
    labels:date_list,
    datasets: [{
      label: "test",
      backgroundColor: color(window.chartColors.yellow).alpha(0.5).rgbString(),
      borderColor: window.chartColors.yellow,
      fill: true,
      data: [],
    }]
  },
  options: {
  aspectRatio : 3,    title: {
      text: 'Chart.js Time Scale'
    },
    scales: {
      xAxes: [{
        type: 'time',
        time: {
          parser: timeFormat,
          // round: 'day'
          tooltipFormat: 'll HH:mm',
          unit:"day"
        },
        scaleLabel: {
          display: true,
          labelString: 'Date'
        }
      }],
      yAxes: [{
        scaleLabel: {
          display: true,
          labelString: 'minute'
        },
        ticks:{
          min: 0
        }
      }]
    },
}
};
var config4 = {
  type: 'line',
  data: {
    labels:date_list,
    datasets: [{
      label: "test",
      backgroundColor: color(window.chartColors.green).alpha(0.5).rgbString(),
      borderColor: window.chartColors.green,
      fill: true,
      data: [],
    }]
  },
  options: {
  aspectRatio : 3,    title: {
      text: 'Chart.js Time Scale'
    },
    scales: {
      xAxes: [{
        type: 'time',
        time: {
          parser: timeFormat,
          // round: 'day'
          tooltipFormat: 'll HH:mm',
          unit:"day"
        },
        scaleLabel: {
          display: true,
          labelString: 'Date'
        }
      }],
      yAxes: [{
        scaleLabel: {
          display: true,
          labelString: 'minute'
        },
        ticks:{
          min: 0
        }
      }]
    },
}
};
var config5 = {
  type: 'line',
  data: {
    labels:date_list,
    datasets: [{
      label: "test",
      backgroundColor: color(window.chartColors.blue).alpha(0.5).rgbString(),
      borderColor: window.chartColors.blue,
      fill: true,
      data: [],
    }]
  },
  options: {
  aspectRatio : 3,    title: {
      text: 'Chart.js Time Scale'
    },
    scales: {
      xAxes: [{
        type: 'time',
        time: {
          parser: timeFormat,
          // round: 'day'
          tooltipFormat: 'll HH:mm',
          unit:"day"
        },
        scaleLabel: {
          display: true,
          labelString: 'Date'
        }
      }],
      yAxes: [{
        scaleLabel: {
          display: true,
          labelString: 'minute'
        },
        ticks:{
          min: 0
        }
      }]
    },
}
};
var config6 = {
  type: 'line',
  data: {
    labels:date_list,
    datasets: [{
      label: "test",
      backgroundColor: color(window.chartColors.purple).alpha(0.5).rgbString(),
      borderColor: window.chartColors.purple,
      fill: true,
      data: [],
    }]
  },
  options: {
  aspectRatio : 3,    title: {
      text: 'Chart.js Time Scale'
    },
    scales: {
      xAxes: [{
        type: 'time',
        time: {
          parser: timeFormat,
          // round: 'day'
          tooltipFormat: 'll HH:mm',
          unit:"day"
        },
        scaleLabel: {
          display: true,
          labelString: 'Date'
        }
      }],
      yAxes: [{
        scaleLabel: {
          display: true,
          labelString: 'minute'
        },
        ticks:{
          min: 0
        }
      }]
    },
}
};
var config7 = {
  type: 'line',
  data: {
    labels:date_list,
    datasets: [{
      label: "test",
      backgroundColor: color(window.chartColors.violet).alpha(0.5).rgbString(),
      borderColor: window.chartColors.violet,
      fill: true,
      data: [],
    }]
  },
  options: {
  aspectRatio : 3,    title: {
      text: 'Chart.js Time Scale'
    },
    scales: {
      xAxes: [{
        type: 'time',
        time: {
          parser: timeFormat,
          // round: 'day'
          tooltipFormat: 'll HH:mm',
          unit:"day"
        },
        scaleLabel: {
          display: true,
          labelString: 'Date'
        }
      }],
      yAxes: [{
        scaleLabel: {
          display: true,
          labelString: 'minute'
        },
        ticks:{
          min: 0
        }
      }]
    },
}
};
var config8 = {
  type: 'line',
  data: {
    labels:date_list,
    datasets: [{
      label: "test",
      backgroundColor: color(window.chartColors.black).alpha(0.5).rgbString(),
      borderColor: window.chartColors.black,
      fill: true,
      data: [],
    }]
  },
  options: {
   aspectRatio : 3,
    title: {
      text: 'Chart.js Time Scale'
    },
    scales: {
      xAxes: [{
        type: 'time',
        time: {
          parser: timeFormat,
          // round: 'day'
          tooltipFormat: 'll HH:mm',
          unit:"day"
        },
        scaleLabel: {
          display: true,
          labelString: 'Date'
        }
      }],
      yAxes: [{
        scaleLabel: {
          display: true,
          labelString: 'minute'
        },
        ticks:{
          min: 0
        }
      }]
    },
}
};

</script><script>
		window.onload = function() {
			var ctx1 = document.getElementById('canvas1').getContext('2d');
			window.myLine1 = new Chart(ctx1, config1);
      var ctx2 = document.getElementById('canvas2').getContext('2d');
      window.myLine2 = new Chart(ctx2, config2);
      var ctx3 = document.getElementById('canvas3').getContext('2d');
      window.myLine3 = new Chart(ctx3, config3);
      var ctx4 = document.getElementById('canvas4').getContext('2d');
      window.myLine4 = new Chart(ctx4, config4);
      var ctx5 = document.getElementById('canvas5').getContext('2d');
      window.myLine5 = new Chart(ctx5, config5);
      var ctx6 = document.getElementById('canvas6').getContext('2d');
      window.myLine6 = new Chart(ctx6, config6);
      var ctx7 = document.getElementById('canvas7').getContext('2d');
      window.myLine7 = new Chart(ctx7, config7);
      var ctx8 = document.getElementById('canvas8').getContext('2d');
      window.myLine8 = new Chart(ctx8, config8);

		};


  </script>

    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  </body>
</html>
